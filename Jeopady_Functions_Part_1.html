<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functions Jeopardy Review</title>
    <style>
        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font as per instructions */
            background-color: #000080; /* Dark Blue */
            color: #FFFFFF; /* White */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* Main Heading */
        h1 {
            color: #FFD700; /* Gold */
            margin-bottom: 30px;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.5);
            font-size: 2.5em;
            text-align: center;
        }

        /* Game Board Grid - Adjusted for 7 columns */
        #game-board {
            display: grid;
            grid-template-columns: repeat(7, 1fr); /* Now 7 columns */
            gap: 10px;
            width: 95%; /* Wider to accommodate more columns */
            max-width: 1400px; /* Increased max-width */
            background-color: #0000CD; /* Medium Blue */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.7);
        }

        /* Category Titles */
        .category-title {
            background-color: #0000CD; /* Medium Blue */
            color: #FFD700; /* Gold */
            font-weight: bold;
            text-align: center;
            padding: 15px 5px;
            border: 2px solid #FFD700;
            border-radius: 8px; /* Rounded corners */
            font-size: 0.9em; /* Slightly smaller font for more categories */
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80px; /* Ensure consistent height */
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            line-height: 1.2; /* Adjust line height for multi-line titles */
        }

        /* Question Boxes */
        .question-box {
            background-color: #008080; /* Teal */
            color: #FFFFFF;
            font-size: 1.6em; /* Slightly smaller font for more categories */
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid #FFD700;
            border-radius: 8px; /* Rounded corners */
            transition: background-color 0.3s ease, transform 0.1s ease;
            min-height: 80px; /* Ensure consistent height */
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }

        .question-box:hover:not(.answered) {
            background-color: #00BFFF; /* Deep Sky Blue */
            transform: scale(1.02);
        }

        .question-box.answered {
            background-color: #333333; /* Darker gray once answered */
            color: #777777; /* Lighter gray for text */
            cursor: not-allowed;
            box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5); /* Inset shadow for answered */
        }

        /* Question Display Overlay */
        #question-display {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Semi-transparent black overlay */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            text-align: center;
            padding: 20px; /* Add padding for smaller screens */
            box-sizing: border-box;
        }

        /* Content within Question Display */
        #question-content {
            background-color: #0000CD;
            border: 5px solid #FFD700;
            border-radius: 15px;
            padding: 40px;
            margin: 20px;
            max-width: 800px;
            width: 95%; /* Make it more fluid */
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #question-text {
            font-size: 2.2em; /* Slightly smaller for better fit */
            margin-bottom: 25px;
            color: #FFFFFF;
            line-height: 1.4;
        }

        /* Input Field */
        #answer-input {
            width: 80%;
            max-width: 400px; /* Limit max width */
            padding: 15px;
            font-size: 1.4em;
            border: 2px solid #FFD700;
            border-radius: 8px;
            margin-bottom: 20px;
            background-color: #333333;
            color: #FFFFFF;
            text-align: center;
        }

        /* Buttons */
        .question-buttons button {
            background-color: #28a745; /* Green */
            color: white;
            padding: 15px 30px;
            font-size: 1.5em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin: 10px; /* Spacing between buttons */
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }

        .question-buttons button:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }

        #show-answer-btn {
            background-color: #dc3545; /* Red */
        }

        #show-answer-btn:hover {
            background-color: #c82333;
        }

        /* Feedback and Solution Display */
        #feedback-message {
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 20px;
            color: #FFD700; /* Gold for feedback */
            display: none; /* Hidden by default */
        }

        #solution-display {
            font-size: 1.4em;
            color: #ADD8E6; /* Light Blue for solution */
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap; /* Preserve newlines */
            background-color: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #FFD700;
            max-height: 300px; /* Limit height for long solutions */
            overflow-y: auto; /* Scroll if content overflows */
            display: none; /* Hidden by default */
            width: 90%;
            box-sizing: border-box;
        }

        /* Score Board */
        #score-board {
            width: 95%; /* Wider to match game board */
            max-width: 1400px; /* Increased max-width */
            background-color: #0000CD;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.7);
            margin-top: 20px;
            text-align: center;
        }

        #scores {
            display: flex;
            justify-content: space-around;
            font-size: 1.5em;
            color: #FFFFFF;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }
        .player-score {
            margin: 10px 15px; /* Adjust margin for wrap */
            padding: 10px 20px;
            background-color: #008080;
            border-radius: 8px;
            border: 2px solid #FFD700;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        .player-score span {
            color: #FFD700;
            font-weight: bold;
        }

        /* Player selection buttons */
        #player-selection button {
            background-color: #6A5ACD; /* Slate Blue */
            color: white;
            padding: 8px 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 5px;
        }
        #player-selection button:hover {
            background-color: #483D8B;
        }
        #player-selection button.active {
            background-color: #FFD700;
            color: #000080;
            border: 2px solid #000080;
            font-weight: bold;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            #game-board {
                grid-template-columns: repeat(4, 1fr); /* 4 columns on medium screens */
            }
            .category-title {
                font-size: 0.85em;
            }
            .question-box {
                font-size: 1.4em;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            #game-board {
                grid-template-columns: repeat(3, 1fr); /* 3 columns on smaller screens */
                width: 95%;
            }
            .category-title, .question-box {
                font-size: 1em;
                min-height: 60px;
            }
            #question-text {
                font-size: 1.8em;
            }
            #answer-input, .question-buttons button {
                font-size: 1.2em;
                padding: 10px 20px;
            }
            #feedback-message, #solution-display {
                font-size: 1.2em;
            }
            #scores {
                font-size: 1.2em;
            }
        }

        @media (max-width: 480px) {
            #game-board {
                grid-template-columns: repeat(2, 1fr); /* 2 columns on very small screens */
            }
            .category-title, .question-box {
                font-size: 0.9em;
                min-height: 50px;
            }
            #question-text {
                font-size: 1.5em;
            }
            #answer-input, .question-buttons button {
                font-size: 1em;
                padding: 8px 15px;
            }
            #feedback-message, #solution-display {
                font-size: 1em;
            }
            #scores {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <h1>Functions Jeopardy Review</h1>

    <div id="game-board">
        <!-- Category Titles - 7 Categories -->
        <div class="category-title">Independent & Dependent Variables</div>
        <div class="category-title">Continuous or Discrete</div>
        <div class="category-title">Writing Linear Rules</div>
        <div class="category-title">Output from Graph (Input Given)</div>
        <div class="category-title">Output from Equation (Input Given)</div>
        <div class="category-title">Input from Graph (Output Given)</div>
        <div class="category-title">Input from Equation (Output Given)</div>

        <!-- Questions - Row 1 (100 points) -->
        <div class="question-box" data-category="0" data-value="100">100</div>
        <div class="question-box" data-category="1" data-value="100">100</div>
        <div class="question-box" data-category="2" data-value="100">100</div>
        <div class="question-box" data-category="3" data-value="100">100</div>
        <div class="question-box" data-category="4" data-value="100">100</div>
        <div class="question-box" data-category="5" data-value="100">100</div>
        <div class="question-box" data-category="6" data-value="100">100</div>

        <!-- Questions - Row 2 (200 points) -->
        <div class="question-box" data-category="0" data-value="200">200</div>
        <div class="question-box" data-category="1" data-value="200">200</div>
        <div class="question-box" data-category="2" data-value="200">200</div>
        <div class="question-box" data-category="3" data-value="200">200</div>
        <div class="question-box" data-category="4" data-value="200">200</div>
        <div class="question-box" data-category="5" data-value="200">200</div>
        <div class="question-box" data-category="6" data-value="200">200</div>

        <!-- Questions - Row 3 (300 points) -->
        <div class="question-box" data-category="0" data-value="300">300</div>
        <div class="question-box" data-category="1" data-value="300">300</div>
        <div class="question-box" data-category="2" data-value="300">300</div>
        <div class="question-box" data-category="3" data-value="300">300</div>
        <div class="question-box" data-category="4" data-value="300">300</div>
        <div class="question-box" data-category="5" data-value="300">300</div>
        <div class="question-box" data-category="6" data-value="300">300</div>

        <!-- Questions - Row 4 (400 points) -->
        <div class="question-box" data-category="0" data-value="400">400</div>
        <div class="question-box" data-category="1" data-value="400">400</div>
        <div class="question-box" data-category="2" data-value="400">400</div>
        <div class="question-box" data-category="3" data-value="400">400</div>
        <div class="question-box" data-category="4" data-value="400">400</div>
        <div class="question-box" data-category="5" data-value="400">400</div>
        <div class="question-box" data-category="6" data-value="400">400</div>

        <!-- Questions - Row 5 (500 points) -->
        <div class="question-box" data-category="0" data-value="500">500</div>
        <div class="question-box" data-category="1" data-value="500">500</div>
        <div class="question-box" data-category="2" data-value="500">500</div>
        <div class="question-box" data-category="3" data-value="500">500</div>
        <div class="question-box" data-category="4" data-value="500">500</div>
        <div class="question-box" data-category="5" data-value="500">500</div>
        <div class="question-box" data-category="6" data-value="500">500</div>
    </div>

    <div id="score-board">
        <h2>Scores</h2>
        <div id="scores">
            <div class="player-score">Player 1: <span id="score1">0</span></div>
            <div class="player-score">Player 2: <span id="score2">0</span></div>
            <!-- Add more players by duplicating the above div and updating the id (e.g., score3) -->
        </div>
        <div id="player-selection">
            <p>Current Player:</p>
            <button id="btn-player1" onclick="setCurrentPlayer(1)">Player 1</button>
            <button id="btn-player2" onclick="setCurrentPlayer(2)">Player 2</button>
            <!-- Add buttons for more players if you add them above (e.g., onclick="setCurrentPlayer(3)") -->
        </div>
    </div>

    <!-- Question Display Overlay -->
    <div id="question-display">
        <div id="question-content">
            <p id="question-text"></p>
            <input type="text" id="answer-input" placeholder="Your Answer">
            <div class="question-buttons">
                <button id="submit-answer-btn">Submit Answer</button>
                <button id="show-answer-btn">Show Solution</button>
            </div>
            <p id="feedback-message"></p>
            <div id="solution-display"></div>
            <button id="close-question-btn" style="margin-top: 20px; background-color: #6c757d;">Close</button>
        </div>
    </div>

    <script>
        // --- GAME DATA ---
        // This is where you will input your questions, answers, and solutions.
        // The structure is questions[category_index][value_index]
        // Categories: 0=Independent/Dependent, 1=Continuous/Discrete, 2=Writing Linear Rules,
        // 3=Output from Graph (Input Given), 4=Output from Equation (Input Given),
        // 5=Input from Graph (Output Given), 6=Input from Equation (Output Given)
        // Values: 0=100, 1=200, 2=300, 3=400, 4=500
        const questions = [
            // Category 0: Identifying Independent and Dependent Variables
            [
                {
                    q: "In the relationship 'The cost of a taxi ride depends on the number of miles traveled', identify the independent and dependent variables.",
                    a: "Independent: Miles, Dependent: Cost",
                    solution: "The independent variable is the one that causes a change or is controlled, which is the number of miles traveled. The dependent variable is the one that changes as a result, which is the cost of the taxi ride."
                },
                {
                    q: "In the relationship 'The amount of money earned at a job depends on the number of hours worked', identify the independent and dependent variables.",
                    a: "Independent: Hours, Dependent: Money",
                    solution: "The independent variable is the number of hours worked, as it determines the amount of money earned. The dependent variable is the money earned, as it depends on the hours."
                },
                {
                    q: "In the relationship 'The height of a plant depends on the amount of sunlight it receives', identify the independent and dependent variables.",
                    a: "Independent: Sunlight, Dependent: Height",
                    solution: "The amount of sunlight received is the independent variable, as it influences the plant's growth. The height of the plant is the dependent variable, as it changes based on sunlight."
                },
                {
                    q: "In the relationship 'The speed of a car depends on how long the gas pedal is pressed', identify the independent and dependent variables.",
                    a: "Independent: Pedal press time, Dependent: Speed",
                    solution: "The duration for which the gas pedal is pressed is the independent variable. The speed of the car is the dependent variable, as it changes based on the pedal press time."
                },
                {
                    q: "In the relationship 'The number of calories burned depends on the duration of exercise', identify the independent and dependent variables.",
                    a: "Independent: Duration of exercise, Dependent: Calories burned",
                    solution: "The duration of exercise is the independent variable, as it's the factor being changed. The number of calories burned is the dependent variable, as it's the outcome that changes."
                }
            ],
            // Category 1: Determining Continuous or Discrete
            [
                {
                    q: "Is 'The number of students in a classroom' continuous or discrete?",
                    a: "Discrete",
                    solution: "The number of students can only be whole numbers (you can't have half a student), so it is discrete."
                },
                {
                    q: "Is 'The height of a tree over time' continuous or discrete?",
                    a: "Continuous",
                    solution: "The height of a tree can take on any value within a range (e.g., 10 feet, 10.5 feet, 10.51 feet), so it is continuous."
                },
                {
                    q: "Is 'The number of cars in a parking lot' continuous or discrete?",
                    a: "Discrete",
                    solution: "You count cars in whole numbers; you can't have a fraction of a car in this context. Therefore, it is discrete."
                },
                {
                    q: "Is 'The temperature of water in a pot as it boils' continuous or discrete?",
                    a: "Continuous",
                    solution: "Temperature can take on any value within a range, not just specific, separate values. So, it is continuous."
                },
                {
                    q: "Is 'The number of pages in a book' continuous or discrete?",
                    a: "Discrete",
                    solution: "The number of pages in a book is counted in whole numbers. It is discrete."
                }
            ],
            // Category 2: Writing the Rule for a Set of Data Representing a Linear Relationship
            [
                {
                    q: "Write the rule (equation) for the data: (0,0), (1,2), (2,4)",
                    a: "y = 2x",
                    solution: "The y-values are always double the x-values. The slope (change in y / change in x) is 2/1 = 2. The y-intercept is 0. So, y = 2x."
                },
                {
                    q: "Write the rule (equation) for the data: (0,3), (1,4), (2,5)",
                    a: "y = x + 3",
                    solution: "The y-values are always 3 more than the x-values. The slope is 1/1 = 1. The y-intercept is 3. So, y = x + 3."
                },
                {
                    q: "Write the rule (equation) for the data: (0,5), (1,3), (2,1)",
                    a: "y = -2x + 5",
                    solution: "The y-values decrease by 2 for every 1 increase in x. The slope is -2/1 = -2. The y-intercept is 5. So, y = -2x + 5."
                },
                {
                    q: "Write the rule (equation) for the data: (1,5), (2,8), (3,11)",
                    a: "y = 3x + 2",
                    solution: "The slope (change in y / change in x) is (8-5)/(2-1) = 3/1 = 3. Using point-slope form y - y1 = m(x - x1): y - 5 = 3(x - 1) -> y - 5 = 3x - 3 -> y = 3x + 2."
                },
                {
                    q: "Write the rule (equation) for the data: (-1,7), (0,4), (1,1)",
                    a: "y = -3x + 4",
                    solution: "The slope (change in y / change in x) is (4-7)/(0-(-1)) = -3/1 = -3. The y-intercept (when x=0) is 4. So, y = -3x + 4."
                }
            ],
            // Category 3: Finding the Output Value for a Given Input Value (Graph)
            [
                {
                    q: "Given the graph of y = x + 2. Find the output (y) when the input (x) is 3.",
                    a: "5",
                    solution: "On the graph of y = x + 2, when x is 3, y is 3 + 2 = 5. So, the point is (3, 5)."
                },
                {
                    q: "Given the graph of y = 3x. Find the output (y) when the input (x) is -2.",
                    a: "-6",
                    solution: "On the graph of y = 3x, when x is -2, y is 3 * (-2) = -6. So, the point is (-2, -6)."
                },
                {
                    q: "Given the graph of y = -x + 5. Find the output (y) when the input (x) is 4.",
                    a: "1",
                    solution: "On the graph of y = -x + 5, when x is 4, y is -4 + 5 = 1. So, the point is (4, 1)."
                },
                {
                    q: "Given a linear graph passing through (0, -1) and (2, 3). Find the output (y) when the input (x) is 1.",
                    a: "1",
                    solution: "First, find the equation of the line. Slope m = (3 - (-1)) / (2 - 0) = 4 / 2 = 2. The y-intercept is -1. So, the equation is y = 2x - 1. Now, substitute x = 1: y = 2(1) - 1 = 2 - 1 = 1."
                },
                {
                    q: "Given a linear graph passing through (-2, 6) and (0, 0). Find the output (y) when the input (x) is -1.",
                    a: "3",
                    solution: "First, find the equation of the line. Slope m = (0 - 6) / (0 - (-2)) = -6 / 2 = -3. The y-intercept is 0. So, the equation is y = -3x. Now, substitute x = -1: y = -3(-1) = 3."
                }
            ],
            // Category 4: Finding the Output Value for a Given Input Value (Equation)
            [
                {
                    q: "Given the function f(x) = x - 5. Find f(7).",
                    a: "2",
                    solution: "Substitute x = 7 into the function: f(7) = 7 - 5 = 2."
                },
                {
                    q: "Given the function g(x) = 4x + 1. Find g(-3).",
                    a: "-11",
                    solution: "Substitute x = -3 into the function: g(-3) = 4(-3) + 1 = -12 + 1 = -11."
                },
                {
                    q: "Given the function h(x) = 1/2x + 3. Find h(10).",
                    a: "8",
                    solution: "Substitute x = 10 into the function: h(10) = (1/2)(10) + 3 = 5 + 3 = 8."
                },
                {
                    q: "Given the function y = -2x^2 + 5. Find y when x = -1.",
                    a: "3",
                    solution: "Substitute x = -1 into the equation: y = -2(-1)^2 + 5 = -2(1) + 5 = -2 + 5 = 3."
                },
                {
                    q: "Given the function k(x) = 3(x - 4) + 7. Find k(2).",
                    a: "1",
                    solution: "Substitute x = 2 into the function: k(2) = 3(2 - 4) + 7 = 3(-2) + 7 = 1."
                }
            ],
            // Category 5: Finding the Input Value for a Given Output Value (Graph)
            [
                {
                    q: "Given the graph of y = x + 2. Find the input (x) when the output (y) is 7.",
                    a: "5",
                    solution: "On the graph of y = x + 2, when y is 7, we set 7 = x + 2. Subtract 2 from both sides: x = 5. So, the point is (5, 7)."
                },
                {
                    q: "Given the graph of y = 3x. Find the input (x) when the output (y) is -9.",
                    a: "-3",
                    solution: "On the graph of y = 3x, when y is -9, we set -9 = 3x. Divide by 3: x = -3. So, the point is (-3, -9)."
                },
                {
                    q: "Given the graph of y = -x + 5. Find the input (x) when the output (y) is 0.",
                    a: "5",
                    solution: "On the graph of y = -x + 5, when y is 0, we set 0 = -x + 5. Add x to both sides: x = 5. So, the point is (5, 0)."
                },
                {
                    q: "Given a linear graph passing through (0, -1) and (2, 3). Find the input (x) when the output (y) is 5.",
                    a: "3",
                    solution: "First, find the equation of the line: y = 2x - 1 (from previous category). Now, substitute y = 5: 5 = 2x - 1. Add 1: 6 = 2x. Divide by 2: x = 3."
                },
                {
                    q: "Given a linear graph passing through (-2, 6) and (0, 0). Find the input (x) when the output (y) is 9.",
                    a: "-3",
                    solution: "First, find the equation of the line: y = -3x (from previous category). Now, substitute y = 9: 9 = -3x. Divide by -3: x = -3."
                }
            ],
            // Category 6: Finding the Input Value for a Given Output Value (Equation)
            [
                {
                    q: "Given the function f(x) = x - 5. Find x when f(x) = 10.",
                    a: "15",
                    solution: "Set the function equal to the output: x - 5 = 10. Add 5 to both sides: x = 15."
                },
                {
                    q: "Given the function g(x) = 4x + 1. Find x when g(x) = 13.",
                    a: "3",
                    solution: "Set the function equal to the output: 4x + 1 = 13. Subtract 1: 4x = 12. Divide by 4: x = 3."
                },
                {
                    q: "Given the function h(x) = 1/2x + 3. Find x when h(x) = 6.",
                    a: "6",
                    solution: "Set the function equal to the output: 1/2x + 3 = 6. Subtract 3: 1/2x = 3. Multiply by 2: x = 6."
                },
                {
                    q: "Given the function y = -3x + 8. Find x when y = -7.",
                    a: "5",
                    solution: "Set the equation equal to the output: -3x + 8 = -7. Subtract 8: -3x = -15. Divide by -3: x = 5."
                },
                {
                    q: "Given the function k(x) = 2(x + 1) - 5. Find x when k(x) = 11.",
                    a: "7",
                    solution: "Set the function equal to the output: 2(x + 1) - 5 = 11. Add 5: 2(x + 1) = 16. Divide by 2: x + 1 = 8. Subtract 1: x = 7."
                }
            ]
        ];

        // --- GAME VARIABLES ---
        let currentQuestion = null;
        let currentQuestionBox = null;
        let scores = {
            player1: 0,
            player2: 0 // Add more players (e.g., player3: 0)
        };
        let currentPlayer = 1; // Default to Player 1

        // --- DOM ELEMENTS ---
        const questionBoxes = document.querySelectorAll('.question-box');
        const questionDisplay = document.getElementById('question-display');
        const questionText = document.getElementById('question-text');
        const answerInput = document.getElementById('answer-input');
        const submitAnswerBtn = document.getElementById('submit-answer-btn');
        const showSolutionBtn = document.getElementById('show-answer-btn'); // Renamed for clarity
        const feedbackMessage = document.getElementById('feedback-message');
        const solutionDisplay = document.getElementById('solution-display');
        const closeQuestionBtn = document.getElementById('close-question-btn');
        const score1Span = document.getElementById('score1');
        const score2Span = document.getElementById('score2');
        const playerSelectionButtons = {
            1: document.getElementById('btn-player1'),
            2: document.getElementById('btn-player2')
            // Add more buttons here if you add more players
        };


        // --- FUNCTIONS ---

        // Function to update scores on the display
        function updateScores() {
            score1Span.textContent = scores.player1;
            score2Span.textContent = scores.player2;
            // Update for other players (e.g., score3Span.textContent = scores.player3;)
        }

        // Function to set the current player and highlight their button
        function setCurrentPlayer(playerNum) {
            currentPlayer = playerNum;
            // Remove active class from all player buttons
            for (const key in playerSelectionButtons) {
                if (playerSelectionButtons.hasOwnProperty(key)) {
                    playerSelectionButtons[key].classList.remove('active');
                }
            }
            // Add active class to the current player's button
            if (playerSelectionButtons[playerNum]) {
                playerSelectionButtons[playerNum].classList.add('active');
            }
        }

        // Function to display a question
        function showQuestion(categoryIndex, valueIndex, boxElement) {
            currentQuestion = questions[categoryIndex][valueIndex];
            currentQuestionBox = boxElement;

            questionText.textContent = currentQuestion.q; // Use textContent as it's not LaTeX anymore
            answerInput.value = ''; // Clear previous answer
            feedbackMessage.style.display = 'none'; // Hide feedback
            solutionDisplay.style.display = 'none'; // Hide solution
            answerInput.disabled = false; // Enable input
            submitAnswerBtn.disabled = false; // Enable submit button
            showSolutionBtn.disabled = false; // Enable show solution button

            questionDisplay.style.display = 'flex'; // Show the overlay
        }

        // Function to check the submitted answer
        function checkAnswer() {
            if (!currentQuestion) {
                console.error("Error: No current question selected when trying to check answer.");
                return;
            }

            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = currentQuestion.a.trim().toLowerCase();
            const questionValue = parseInt(currentQuestionBox.dataset.value);

            // Simple check. For more complex math, you might need a parsing library
            if (userAnswer === correctAnswer) {
                feedbackMessage.textContent = 'Correct!';
                feedbackMessage.style.color = '#28a745'; /* Green */
                scores[`player${currentPlayer}`] += questionValue;
                currentQuestionBox.classList.add('answered');
                currentQuestionBox.style.cursor = 'not-allowed'; // Prevent re-clicking

                // Disable input and submit after correct answer
                answerInput.disabled = true;
                submitAnswerBtn.disabled = true;
                showSolutionBtn.disabled = true; // Disable show solution after answer
            } else {
                feedbackMessage.textContent = `Incorrect. The correct answer was: ${currentQuestion.a}`;
                feedbackMessage.style.color = '#dc3545'; /* Red */
                // Optionally deduct points for incorrect answers (Jeopardy style)
                // scores[`player${currentPlayer}`] -= questionValue;

                // Keep input and submit enabled if you want them to try again
                // Or disable if you want them to just see the solution
                answerInput.disabled = true; // Disable after one attempt
                submitAnswerBtn.disabled = true;
                showSolutionBtn.disabled = false; // Allow showing solution if incorrect
            }
            feedbackMessage.style.display = 'block';
            solutionDisplay.textContent = currentQuestion.solution;
            solutionDisplay.style.display = 'block';
            updateScores();
        }

        // Function to show the correct answer/solution without checking input
        function showSolution() {
            if (!currentQuestion) {
                console.error("Error: No current question selected when trying to show solution.");
                return;
            }

            feedbackMessage.textContent = `The correct answer is: ${currentQuestion.a}`;
            feedbackMessage.style.color = '#FFD700'; /* Gold */
            feedbackMessage.style.display = 'block';
            solutionDisplay.textContent = currentQuestion.solution;
            solutionDisplay.style.display = 'block';

            // Mark as answered regardless of trying again
            currentQuestionBox.classList.add('answered');
            currentQuestionBox.style.cursor = 'not-allowed';
            answerInput.disabled = true; // Disable input
            submitAnswerBtn.disabled = true; // Disable submit button
            showSolutionBtn.disabled = true; // Disable show solution button after it's shown
            closeQuestion(); // Close the question display after showing solution
        }

        // Function to close the question display
        function closeQuestion() {
            questionDisplay.style.display = 'none';
        }

        // --- EVENT LISTENERS ---

        // Add click listener to each question box
        questionBoxes.forEach(box => {
            box.addEventListener('click', () => {
                if (!box.classList.contains('answered')) {
                    const categoryIndex = parseInt(box.dataset.category);
                    // Convert data-value (100, 200...) to array index (0, 1...)
                    const valueIndex = (parseInt(box.dataset.value) / 100) - 1;
                    showQuestion(categoryIndex, valueIndex, box);
                }
            });
        });

        submitAnswerBtn.addEventListener('click', checkAnswer);
        showSolutionBtn.addEventListener('click', showSolution);
        closeQuestionBtn.addEventListener('click', closeQuestion);

        // Allow pressing Enter key to submit answer when input is focused
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !answerInput.disabled) {
                checkAnswer();
            }
        });

        // Initialize scores and set default player on load
        updateScores();
        setCurrentPlayer(1); // Set Player 1 as active initially

        // Initially disable the submit and show solution buttons until a question is selected
        submitAnswerBtn.disabled = true;
        showSolutionBtn.disabled = true;
    </script>
</body>
</html>
